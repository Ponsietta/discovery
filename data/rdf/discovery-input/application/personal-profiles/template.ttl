@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ldvm:       <http://linked.opendata.cz/ontology/ldvm/> .
@prefix application:  <http://linked.opendata.cz/resource/ldvm/application/personal-profiles/> .
@prefix configuration-vocabulary:  <http://linked.opendata.cz/vocabulary/ldvm/application/personal-profiles/configuration/> .

application:template a ldvm:ApplicationTemplate ;
	dcterms:title "Personal Profiles Application"@en;
	dcterms:description "Displays things made by people on a map or timeline"@en;
	ldvm:componentConfigurationTemplate application:defaultConfiguration ; #tahle property by mela byt ldvm:defaultConfiguration?
	ldvm:inputTemplate application:input ;
	ldvm:feature application:personsFeature, application:personsThingsAsMarkersFeature, application:personsThingsAsMarkersWithLabelsFeature, application:personsThingsAsMarkersWithDescriptionsFeature, application:personsThingsAsTimeInstantsFeature, application:personsThingsAsTimeInstantsWithLabelsFeature, application:personsThingsAsTimeInstantsWithDescriptionsFeature, application:personsThingsAsTimeIntervalsFeature, application:personsThingsAsTimeIntervalsWithLabelsFeature, application:personsThingsAsTimeIntervalsWithDescriptionsFeature .
	
configuration-vocabulary:Configuration a rdfs:Class ;
	rdfs:label "Class of configurations of personal profiles application"@en;
	rdfs:subClassOf ldvm:ComponentConfiguration .
	
configuration-vocabulary:markerColor a rdf:Property ;
	rdfs:label "Initial color of markers on the displayed map."@en
	rdfs:domain configuration-vocabulary:Configuration ;
	rdfs:range xsd:string .

configuration-vocabulary:center a rdf:Property ;
	rdfs:label "Geoocoordinates of the initial center of the displayed map."@en
	rdfs:domain configuration-vocabulary:Configuration ;
	rdfs:range geo:SpatialThing .

configuration-vocabulary:zoom a rdf:Property ;
	rdfs:label "Initial zoom of the displayed map."@en
	rdfs:domain configuration-vocabulary:Configuration ;
	rdfs:range xsd:int .
	
application:defaultConfiguration a configuration-vocabulary:Configuration ;
	dcterms:title "Default configuration for personal profiles application"@en ;
	application:markerColor "#ff0000" ;
	application:center application:defaultCenter ;
	application:zoom 0^^xsd:int ;
	
application:defaultCenter a geo:SpatialThing ;
	geo:long 14.4038611 ;
	geo:lat 50.0883378 .
	
application:input a ldvm:InputDataPortTemplate ;
	dcterms:title "Persons and things they made with temporal or geospatial abstraction." .
	
application:personsFeature a ldvm:MandatoryFeature ;
	dcterms:title "Displays persons and things they made." ;
	ldvm:descriptor application:personsDescriptor .
	
application:personsThingsAsMarkersFeature a ldvm:OptionalFeature ;
	dcterms:title "Displays things made by persons as markers on a map." ;
	ldvm:descriptor application:personsThingsAsMarkersDescriptor .
	
application:personsDescriptor a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		
		ASK {
			?agent foaf:name ?agentName ;
				foaf:made ?thing .
		}
	""" ;
	ldvm:appliesTo application:input .

application:personsThingsAsMarkersDescriptor a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with geospatial abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?place .
		
			?place geo:location ?geo .
		  
			?geo a geo:SpatialThing ;
				geo:long ?long ;
				geo:lat ?lat .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsMarkersWithLabelsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with labeled geospatial abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?place .
		
			?place geo:location ?geo ;
				dcterms:title ?abstractionLabel .
		  
			?geo a geo:SpatialThing ;
				geo:long ?long ;
				geo:lat ?lat .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsMarkersWithDescriptionsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with described geospatial abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?place .
		
			?place geo:location ?geo ;
				dcterms:description ?abstractionDescription .
		  
			?geo a geo:SpatialThing ;
				geo:long ?long ;
				geo:lat ?lat .
		}
	""" ;
	ldvm:appliesTo application:input .

application:personsThingsAsTimeInstantsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with temporal instant abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?instant .
	
			?instant time:inXSDDateTime ?dt .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsTimeInstantsWithLabelsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with labeled temporal instant abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?instant ;
				dcterms:title ?abstractionDescription .
	
			?instant time:inXSDDateTime ?dt .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsTimeInstantsWithDescriptionsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with described temporal instant abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?instant ;
				dcterms:description ?abstractionDescription .
	
			?instant time:inXSDDateTime ?dt .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsTimeIntervalsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with temporal interval abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?interval .
	
			?interval time:hasBeginning ?beginning ;
				time:hasEnd ?end .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsTimeIntervalsWithLabelsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with labeled temporal interval abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?interval ;
				dcterms:title ?abstractionDescription .
	
			?interval time:hasBeginning ?beginning ;
				time:hasEnd ?end .
		}
	""" ;
	ldvm:appliesTo application:input .
	
application:personsThingsAsTimeIntervalsWithDescriptionsFeature a ldvm:Descriptor ;
	dcterms:title "Check for presence of persons and things they made with described temporal interval abstraction" ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>
		PREFIX time: <http://www.w3.org/2006/time#>
		PREFIX dcterms: <http://purl.org/dc/terms/> 
		
		ASK {
			?agent foaf:made ?thing .
			
			?thing ?hasAbstraction ?interval ;
				dcterms:description ?abstractionDescription .
	
			?interval time:hasBeginning ?beginning ;
				time:hasEnd ?end .
		}
	""" ;
	ldvm:appliesTo application:input .