@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ldvm:       <http://linked.opendata.cz/ontology/ldvm/> .
@prefix transformer:  <http://linked.opendata.cz/resource/ldvm/transformer/foaf-maker-to-foaf-made/> .
@prefix configuration-vocabulary:  <http://linked.opendata.cz/vocabulary/ldvm/transformer/foaf-maker-to-foaf-made/configuration/> .

transformer:template a ldvm:TransformerTemplate ;
	dcterms:title "FOAF maker to FOAF made transformer"@en;
	dcterms:description "Transforms triples with FOAF maker property to FOAF made property"@en;
	ldvm:componentConfigurationTemplate transformer:defaultConfiguration ;
	ldvm:inputTemplate transformer:input ;
	ldvm:outputTemplate transformer:output ;
	ldvm:feature transformer:feature .
	
configuration-vocabulary:Configuration a rdfs:Class ;
	rdfs:label "Class of configurations of FOAF maker to FOAF made transformer"@en;
	rdfs:subClassOf ldvm:ComponentConfiguration .
	
transformer:defaultConfiguration a configuration-vocabulary:Configuration ;
	dcterms:title "Default configuration" .

transformer:input a ldvm:InputDataPortTemplate ;
	dcterms:title "Triples with FOAF maker predicate" .
	
transformer:output a ldvm:OutputDataPortTemplate ;
	dcterms:title "Triples with FOAF made predicate" .
	
transformer:feature a ldvm:MandatoryFeature ;
	dcterms:title "Transforms FOAF maker to FOAF made" ;
	ldvm:descriptor transformer:descriptor .
	
# Tady je trochu zmena - nepopisuje to ciste jen ten input, ale chovani celeho transformeru. Stale ale plati, ze je aplikovan (ldvm:appliesTo) na input.
transformer:descriptor a ldvm:Descriptor ;
	ldvm:query """
		PREFIX foaf: <http://xmlns.com/foaf/0.1/>

		DELETE {
		  ?thing foaf:maker ?maker .
		} INSERT {
		  ?maker foaf:made ?thing .
		} WHERE {
		  ?thing foaf:maker ?maker .
		}
	""" ;
	ldvm:appliesTo transformer:input .